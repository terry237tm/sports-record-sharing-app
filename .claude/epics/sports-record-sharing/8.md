---
name: 运动记录创建功能
status: open
created: 2025-09-09T09:19:22Z
updated: 2025-09-10T06:15:48Z
github: https://github.com/terry237tm/sports-record-sharing-app/issues/8
depends_on: [001, 002, 003, 004, 005]
parallel: true
conflicts_with: []
---

# 运动记录创建功能

## Description
实现运动记录的创建功能，包括运动类型选择、运动数据录入（时长、距离、卡路里等）、运动描述等核心功能。提供用户友好的表单界面，支持多种运动类型的数据录入。

## Acceptance Criteria
- [ ] 运动类型选择组件开发完成（跑步、骑行、游泳、健身等）
- [ ] 运动数据表单开发完成（时长、距离、卡路里、心率、步数）
- [ ] 运动描述文本框支持多行输入和字数限制
- [ ] 表单数据验证逻辑实现（必填项、数值范围、格式验证）
- [ ] 提交按钮状态管理（加载中、成功、失败）
- [ ] 创建成功后页面跳转和提示信息显示
- [ ] 支持草稿保存功能，防止数据丢失
- [ ] 表单重置功能，清空所有输入数据

## Technical Details
### 数据模型设计
```typescript
interface SportRecordForm {
  sportType: SportType;           // 运动类型枚举
  duration: number;              // 运动时长（分钟）
  distance?: number;             // 运动距离（公里，可选）
  calories: number;              // 消耗卡路里
  heartRate?: number;            // 心率（可选）
  steps?: number;                // 步数（可选）
  description: string;           // 运动描述
  images: string[];              // 图片URL数组
  location?: LocationData;       // 位置信息（可选）
}
```

### 表单验证规则
```typescript
const validationRules = {
  sportType: { required: true, enum: Object.values(SportType) },
  duration: { required: true, min: 1, max: 1440 }, // 1分钟到24小时
  distance: { min: 0.1, max: 200 }, // 0.1到200公里
  calories: { required: true, min: 10, max: 5000 }, // 10到5000卡路里
  heartRate: { min: 40, max: 220 }, // 正常心率范围
  steps: { min: 1, max: 100000 }, // 步数范围
  description: { maxLength: 500 }, // 最多500字符
  images: { maxCount: 9 } // 最多9张图片
}
```

### 组件结构设计
```
CreateRecordPage/
├── SportTypeSelector/     # 运动类型选择器
├── DataInputForm/        # 数据输入表单
├── DescriptionInput/     # 描述文本框
├── ImageUploadArea/      # 图片上传区域（与007任务集成）
├── LocationSelector/     # 位置选择器（与008任务集成）
└── SubmitButton/         # 提交按钮
```

### 状态管理
- 使用 Redux Toolkit 管理表单状态
- 实现表单数据的双向绑定
- 支持草稿状态的自动保存
- 错误状态的集中管理

## Dependencies
- 依赖任务001-005完成（基础架构和类型定义）
- 依赖任务007（图片上传）和008（位置服务）的接口定义

## Effort Estimate
- **Size**: L (大型)
- **Estimated Hours**: 12-16 小时

## Definition of Done
- [ ] 所有表单组件开发完成并通过单元测试
- [ ] 表单验证逻辑完整实现，覆盖所有边界条件
- [ ] 与后端API集成完成，数据正确提交
- [ ] 用户体验测试通过，包括加载状态和错误处理
- [ ] 代码审查完成，符合项目编码规范
- [ ] 性能测试通过，表单响应流畅无卡顿
- [ ] 文档更新完成，包括组件使用说明
